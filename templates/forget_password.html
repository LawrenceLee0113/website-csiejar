<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="../static/script/login.js"></script>
    {{component_html_obj.header_info_html | safe}}

</head>

<body>
    {{component_html_obj.top_navbar_html | safe}}
    {{component_html_obj.error_window_html | safe}}
    <div class="container d-flex justify-content-center flex-column">

        <h1>忘記密碼 所以更改密碼</h1>
        

          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="new_password1">請輸入新密碼：</span>
            </div>
            <input type="text" class="form-control" placeholder="new_password1" aria-label="new_password1" aria-describedby="new_password1" id="new_password1_input">
          </div>

          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="new_password2">再次輸入新密碼：</span>
            </div>
            <input type="text" class="form-control" placeholder="new_password2" aria-label="new_password2" aria-describedby="new_password2" id="new_password2_input">
          </div>


        <button class="btn btn-secondary" id="change_password_submit">確認送出</button>
</div>


    <script>
        function verifyPassLength(password1, password2) {

            //check empty password field
            if (password1 != password2) {

                alert("兩次密碼不相符!");
                return false;
            }
            if(password1 == "")
            {
                alert("密碼不得為空值...!");
                return false;
            }

            //Password minimum length
            if(password1.length < 6) 
            {
                alert("密碼長度需要至少6字元!");
                return false;
            }

            //Password maximum length
            if(password1.length > 12)
            {
                alert("密碼長度需要小於12字元!");
                return false;
            }
            if(!((password1.match(/[a-z]/g) || password1.match(/[A-Z]/g)) && password1.match(/[0-9]/g))){
                alert("密碼至少一個英文與數字!");
                return false;
            }
            return true;
            }
        $(document).ready(function () {
            $("#change_password_submit").click(function (e) { 
                e.preventDefault();
                if(verifyPassLength($("#new_password1_input").val(),$("#new_password2_input").val())){
                    $.ajax({
                        type: "POST",
                        url: "url",
                        data: {
                            user_id: getCookie()["user_id"],
                            user_token: getCookie()["user_token"],
                            old_password: $("#old_password").val(),
                            password2: $("#new_password").val()
                        },
                        dataType: "json",
                        success: function (response) {
                            console.log(response)
                        }
                    });
                }
            });
        });
    </script>

</body>

</html>